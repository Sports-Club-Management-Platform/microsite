"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6626],{2631:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});var s=t(4848),i=t(8453);const c={sidebar_position:1},o=void 0,r={id:"Tickets/Frontend",title:"Frontend",description:"Buy Ticket",source:"@site/docs/Tickets/Frontend.md",sourceDirName:"Tickets",slug:"/Tickets/Frontend",permalink:"/microsite/docs/Tickets/Frontend",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"documentationSidebar",previous:{title:"Configuration",permalink:"/microsite/docs/Authentication/Configuration"},next:{title:"Backend",permalink:"/microsite/docs/Tickets/Backend"}},a={},d=[{value:"Buy Ticket",id:"buy-ticket",level:3},{value:"Functions",id:"functions",level:3}];function u(e){const n={code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"buy-ticket",children:"Buy Ticket"}),"\n",(0,s.jsx)(n.p,{children:'After choosing the desired game, the user can select the number of tickets for that game and proceed by clicking the "Continuar para pagamento" button.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Buy Ticket Image",src:t(1599).A+"",width:"1680",height:"855"})}),"\n",(0,s.jsx)(n.p,{children:"After clicking the button, the user is redirected to the payment page, where they can choose the payment method and complete the purchase. This was implemented using the Stripe API."}),"\n",(0,s.jsx)(n.h3,{id:"functions",children:"Functions"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"createCheckoutSession"})}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Responsible for creating a checkout session using the Stripe API. It sends a request to the ",(0,s.jsx)(n.code,{children:"PaymentsService.create_checkout_session"})," method with a predefined price ID and quantity."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'const createCheckoutSession = async () => {\n  const checkout_session = (await PaymentsService.create_checkout_session(\n      "price_1QBvVfJo4ha2Zj4nO3F0YLFr", 1\n  )).data;\n  return checkout_session;\n};\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"checkoutSessionMutation"})}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["It uses the ",(0,s.jsx)(n.code,{children:"useMutation"})," hook from ",(0,s.jsx)(n.code,{children:"@tanstack/react-query"})," to handle the mutation (i.e., the creation of the checkout session) and manage its state (loading, success, error).","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'const checkoutSessionMutation = useMutation({\n  mutationFn: createCheckoutSession,\n  onSuccess: (data) => {\n    window.location.href = data.checkout_url\n  },\n  onError: (error) => {\n    console.error("Redirect falhou", error.message);\n  }\n});\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},1599:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/buyticket-bad6fa51f6e5358cdede65c54d4ed971.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(6540);const i={},c=s.createContext(i);function o(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);